<!doctype html>
<html>
<head>
  <title>Snarkjs client example</title>
</head>
<body>

  <h1>Snarkjs client example</h1>
  <button id="bGenProof"> Create proof </button>

  <!-- JS-generated output will be added here. -->
  <pre class="proof"> Proof: <code id="proof"></code></pre>

  <pre class="proof"> Result: <code id="result"></code></pre>

  <button id="bContrib"> Contribute </button>
  <pre class="proof"> Hash: <code id="hash"></code></pre>


  <script src="/javascripts/snarkjs.min.js">   </script> 


  <!-- This is the bundle generated by rollup.js -->
  <script>

const proofCompnent = document.getElementById('proof');
const resultComponent = document.getElementById('result');
const bGenProof = document.getElementById("bGenProof");
const bContrib = document.getElementById("bContrib");
const hashComponent = document.getElementById('hash');

bGenProof.addEventListener("click", calculateProof);
bContrib.addEventListener("click", contribute);

async function calculateProof() {

    const { proof, publicSignals } =
      await snarkjs.groth16.fullProve( { a: 3, b: 11}, "circuit.wasm", "circuit_final.zkey");

    proofCompnent.innerHTML = JSON.stringify(proof, null, 1);


    const vkey = await fetch("verification_key.json").then( function(res) {
        return res.json();
    });

    const res = await snarkjs.groth16.verify(vkey, publicSignals, proof);

    resultComponent.innerHTML = res;
}

async function contribute() {
  const hash =
        await snarkjs.zKey.contribute( "/data/circuit_0001.zkey", { type: "mem" }, "contributor #2", "010a020b030d040f0r050g0tkalasdkasd", null);

  hashComponent.innerHTML = JSON.stringify(hash, null, 1);

}

  </script>

</body>
</html>
